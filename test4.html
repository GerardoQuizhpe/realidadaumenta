<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realidad Aumentada </title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.1.7/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs>
        <!-- Marcador personalizado -->
        <a-marker type="pattern" url="/patrones/pattern-hiro.patt">
            <!-- Mostrar imagen"-->
            <a-image
                src="https://t3.ftcdn.net/jpg/05/43/06/00/240_F_543060065_aUnJHSkTRLqGRqbNis0MFld1U80FXTN9.jpg"
                position="0 0 0"
                rotation="-90 0 0"
                scale="1.25 1.25 1.25">
            </a-image>  
        </a-marker>

        <a-marker type="pattern" url="https://gerardoquizhpe.github.io/modelos3d/pattern-qr-code (1).patt">
            <a-entity 
                gltf-model="https://gerardoquizhpe.github.io/modelos3d/Webcam.glb"
                scale="1 1 1">
            </a-entity>
        </a-marker>
        
        <a-marker type="pattern" url="https://gerardoquizhpe.github.io/modelos3d/pattern-qr1730836015762.patt">
            <a-entity 
                gltf-model="https://gerardoquizhpe.github.io/modelos3d/Security Camera.glb"
                scale="0.3 0.3 0.3"
                position="0 0 0">
            </a-entity>
        </a-marker>

        <a-marker type="pattern" url="https://gerardoquizhpe.github.io/modelos3d/pattern-qr-code (2).patt">
            <a-entity 
                gltf-model="https://gerardoquizhpe.github.io/modelos3d/mosca/scene.gltf"
                scale="0.3 0.3 0.3"
                position="0 0.5 0">
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

  <script>
    // Detectar si el usuario está en un dispositivo Android
    const isAndroid = /Android/i.test(navigator.userAgent);

    if (isAndroid) {
      console.log("Aplicando ajustes específicos para Android");

      // Sobrescribir la configuración de la cámara con una resolución personalizada
      let arToolkitSource = document.querySelector('a-scene').components['arjs'].arToolkitSource;
      
      // Sobrescribimos la función de inicialización de la cámara
      arToolkitSource.initSource = function () {
        navigator.mediaDevices
          .getUserMedia({
            video: {
              facingMode: { exact: "environment" }, // Usa la cámara trasera
              width: { ideal: 1280 }, // Resolución ideal
              height: { ideal: 720 }
            }
          })
          .then((stream) => {
            arToolkitSource.domElement.srcObject = stream;
            arToolkitSource.domElement.play();
          })
          .catch((error) => {
            console.error("Error al acceder a la cámara:", error);
          });
      };

      // Inicializamos el AR.js con los cambios
      arToolkitSource.initSource();
    }
</body>
</html>
